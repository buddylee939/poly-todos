<div class="row my-5">
  <div class="col-sm-10">
    <h1>All Tasks</h1>
  </div>
  <div class="col-sm-2">
    <%= link_to 'New Todo Item', new_todo_item_path, class: 'btn btn-primary' %>   
  </div>
</div>
<div class="row">
  <div class="col">
    <h3>
      Number of tasks: <%= @todo_items.count %> - 
      Number Completed: <%= @todo_items.completed.count %>
    </h3>      
  </div>
</div>
<div class="table-responsive">
  <table class="table table-striped table-hover">
    <thead class="thead-dark">
      <tr>
        <th>Task</th>
        <th>Notes</th>
        <th>Response</th>
        <th>Completed</th>
        <th>Todo list</th>
        <th>User</th>
        <th colspan="3"></th>
      </tr>
    </thead>

    <tbody>
      <% @todo_items.each do |todo_item| %>
        <tr class="<%= todo_item.completed ? 'table-success' : '' %>">
          <td><%= link_to todo_item.task, todo_item %></td>
          <td><%= truncate(todo_item.notes, length: 40) %></td>
          <td><%= truncate(todo_item.response, length: 40) %></td>
          <td>
            <%= !todo_item.completed_at.nil? ? 'Yes' : 'No' %>
          </td>
          <td><%= link_to todo_item.todo_list.title, todo_item.todo_list %></td>
          <td><%= link_to todo_item.user.first_name, my_todos_path(user_id: todo_item.user.id) %></td>
          <td><%= link_to 'Show', todo_item %></td>
          <td><%= link_to 'Edit', edit_todo_item_path(todo_item) %></td>
          <td><%= link_to 'Destroy', todo_item, method: :delete, data: { confirm: 'Are you sure?' } unless current_user.first_name.downcase != 'pep' %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
    <%= will_paginate @todo_items, list_classes: %w(pagination justify-content-center) %>
</div>

